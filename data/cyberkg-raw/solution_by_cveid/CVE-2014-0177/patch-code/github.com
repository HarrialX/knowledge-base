Original Source:
https://github.com/github/hub/commit/016ec99d25b1cb83cb4367e541177aa431beb600

Commit history:

  @@ -519,7 +519,7 @@ def am(args)
   end
   end
  
-  patch_file = File.join(tmp_dir, patch_name)
+  patch_file = Tempfile.new('patch_name')
   File.open(patch_file, 'w') { |file| file.write(patch) }
   args[idx] = patch_file
   end
  
  @@ -556,10 +556,6 @@ def command?(name)
          !which(name).nil?
   end
  
-  def tmp_dir
-  ENV['TMPDIR'] || ENV['TEMP'] || '/tmp'
-  end
- 
   def terminal_width
   if unix?
   width = %x{stty size 2>#{NULL}}.split[1].to_i
  
