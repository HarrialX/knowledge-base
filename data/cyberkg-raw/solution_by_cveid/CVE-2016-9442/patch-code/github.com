Original Source:
https://github.com/tats/w3m/commit/d43527cfa0dbb3ccefec4a6f7b32c1434739aa29

Commit history:

  @@ -232,8 +232,8 @@ Strgrow(Str x)
  {
   char *old = x->ptr;
   int newlen;
-     newlen = x->length * 6 / 5;
-  if (newlen == x->length)
+     newlen = x->area_size * 6 / 5;
+  if (newlen == x->area_size)
  	newlen += 2;
      x->ptr = GC_MALLOC_ATOMIC(newlen);
      x->area_size = newlen;
  
