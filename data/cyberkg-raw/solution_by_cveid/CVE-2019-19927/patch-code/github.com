Original Source:
https://github.com/torvalds/linux/commit/ac1e516d5a4c56bf0cb4a3dfc0672f689131cfd4

Commit history:

  @@ -732,7 +732,7 @@ static void ttm_put_pages(struct page **pages, unsigned npages, int flags,
  #ifdef CONFIG_TRANSPARENT_HUGEPAGE
   if (!(flags & TTM_PAGE_FLAG_DMA32) &&
  			    (npages - i) >= HPAGE_PMD_NR) {
-  for (j = 0; j < HPAGE_PMD_NR; ++j)
+  for (j = 1; j < HPAGE_PMD_NR; ++j)
   if (p++ != pages[i + j])
   break;
  
  @@ -767,7 +767,7 @@ static void ttm_put_pages(struct page **pages, unsigned npages, int flags,
   if (!p)
   break;
  
-  for (j = 0; j < HPAGE_PMD_NR; ++j)
+  for (j = 1; j < HPAGE_PMD_NR; ++j)
   if (p++ != pages[i + j])
   break;
  
  
