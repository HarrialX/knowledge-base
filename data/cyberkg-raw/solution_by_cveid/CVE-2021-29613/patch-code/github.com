Original Source:
https://github.com/tensorflow/tensorflow/commit/4504a081af71514bb1828048363e6540f797005b

Commit history:

  @@ -100,6 +100,10 @@ class CTCLossOp : public OpKernel {
   errors::InvalidArgument("sequence_length is not a vector"));
   OP_REQUIRES(ctx, TensorShapeUtils::IsMatrix(labels_indices->shape()),
   errors::InvalidArgument("labels_indices is not a matrix"));
+  OP_REQUIRES(ctx, labels_indices->dim_size(1) > 1,
+  errors::InvalidArgument(
+  "labels_indices second dimension must be >= 1. Received ",
+                     labels_indices->dim_size(1)));
   OP_REQUIRES(ctx, TensorShapeUtils::IsVector(labels_values->shape()),
   errors::InvalidArgument("labels_values is not a vector"));
  
  
