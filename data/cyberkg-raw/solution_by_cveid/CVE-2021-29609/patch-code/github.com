Original Source:
https://github.com/tensorflow/tensorflow/commit/6fd02f44810754ae7481838b6a67c5df7f909ca3

Commit history:

  @@ -14,6 +14,7 @@ limitations under the License.
  ==============================================================================*/
  
  #include "tensorflow/core/framework/op_kernel.h"
+ #include "tensorflow/core/framework/op_requires.h"
  #include "tensorflow/core/framework/register_types.h"
  #include "tensorflow/core/framework/tensor.h"
  #include "tensorflow/core/framework/tensor_util.h"
  @@ -101,6 +102,10 @@ class SparseAddOp : public OpKernel {
      std::vector<T> out_values;
   const int num_dims = a_shape->dim_size(0);
  
+  OP_REQUIRES(ctx, num_dims > 0,
+  errors::InvalidArgument("Invalid input_a shape. Received: ",
+                                         a_shape->DebugString()));
+ 
   // The input and output sparse tensors are assumed to be ordered along
   // increasing dimension number.
      int64 i = 0, j = 0;
  
