Original Source:
https://github.com/axiomatic-systems/Bento4/commit/4d3f0bebd5f8518fd775f671c12bea58c68e814e

Commit history:

  @@ -87,6 +87,11 @@ AP4_AtomSampleTable::GetSample(AP4_Ordinal index,
  {
      AP4_Result result;
  
+  // check that we have an stsc atom
+  if (!m_StscAtom) {
+  return AP4_ERROR_INVALID_FORMAT;
+     }
+ 
   // check that we have a chunk offset table
   if (m_StcoAtom == NULL && m_Co64Atom == NULL) {
   return AP4_ERROR_INVALID_FORMAT;
  
  @@ -270,7 +270,7 @@ AP4_AvccAtom::InspectFields(AP4_AtomInspector& inspector)
   for (unsigned int i=0; i<m_SequenceParameters.ItemCount(); i++) {
          inspector.AddField("Sequence Parameter", m_SequenceParameters[i].GetData(), m_SequenceParameters[i].GetDataSize());
      }
-  for (unsigned int i=0; i<m_SequenceParameters.ItemCount(); i++) {
+  for (unsigned int i=0; i<m_PictureParameters.ItemCount(); i++) {
          inspector.AddField("Picture Parameter", m_PictureParameters[i].GetData(), m_PictureParameters[i].GetDataSize());
      }
   return AP4_SUCCESS;
  
  @@ -554,6 +554,7 @@ AP4_Processor::Process(AP4_ByteStream&   input,
   int cursor = -1;
   for (unsigned int i=0; i<track_count; i++) {
   if (!cursors[i].m_EndReached &&
+                     cursors[i].m_Locator.m_SampleTable &&
                      cursors[i].m_Locator.m_Sample.GetOffset() <= min_offset) {
                      min_offset = cursors[i].m_Locator.m_Sample.GetOffset();
                      cursor = i;
  
  @@ -37,7 +37,7 @@
  /**
   * Version number of the SDK
   */
- #define AP4_VERSION 0x01050000
- #define AP4_VERSION_STRING "1.5.0.0"
+ #define AP4_VERSION 0x01050001
+ #define AP4_VERSION_STRING "1.5.0.1"
  
  #endif // _AP4_VERSION_H_
