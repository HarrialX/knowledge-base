Original Source:
https://github.com/OS4ED/openSIS-Responsive-Design/commit/1127ae0bb7c3a2883febeabc6b71ad8d73510de8

Commit history:

  @@ -36,6 +36,9 @@
  
  echo '<div id=err_message ></div>';
  
+ echo '<div class="form-group">';
+ echo '<label class="control-label">Date : '.$_REQUEST['school_date'].'&nbsp;</label>';
+ echo '</div>';
  
  if ($RET[1]['TITLE'] == '') {
   echo '<div class="form-group">';
  
  @@ -358,7 +358,7 @@
  
   //===================================================================================================
  
-  //For Marking Period
+  // For Marking Period
   echo "<li><div class=\"form-group\"><FORM name=head_frm id=head_frm action=Side.php?modfunc=update&btnn=$btn&nsc=$ns method=POST>
                          <INPUT type=hidden name=modcat value='' id=modcat_input>";
  
  @@ -386,10 +386,10 @@
   echo "<OPTION value=$quarter[MARKING_PERIOD_ID]" . (UserMP() == $quarter['MARKING_PERIOD_ID'] ? ' SELECTED' : '') . ">" . $quarter['TITLE'] . "</OPTION>";
      }
   echo "</SELECT>";
-  //Marking Period
+  // Marking Period
  
   echo '</FORM></div></li>';
- }##################Porfile Not Teacher End##########################################
+ }################## Porfile Not Teacher End ##########################################
  
  if (UserStudentID() && User('PROFILE') != 'parent' && User('PROFILE') != 'student') {
   $RET = DBGet(DBQuery("SELECT FIRST_NAME,LAST_NAME,MIDDLE_NAME,NAME_SUFFIX FROM students WHERE STUDENT_ID='" . UserStudentID() . "'"));
  @@ -458,7 +458,7 @@
   $ret_increment++;
          }
      }
-  // print_r($RET);
+ 
   if (!UserCourse()) {
   $_SESSION['UserCourse'] = $RET[1]['COURSE_ID'];
      }
  
  @@ -54,11 +54,11 @@
  --
  
  INSERT INTO `app` (`name`, `value`) VALUES
- ('version', '7.3'),
- ('date', 'August 23, 2019'),
- ('build', '20190823001'),
+ ('version', '7.4'),
+ ('date', 'April 25, 2020'),
+ ('build', '20200425001'),
  ('update', '0'),
- ('last_updated', 'August 23, 2019');
+ ('last_updated', 'April 25, 2020');
  
  --
  -- Dumping data for table `attendance_calendar`
  
  @@ -34,11 +34,11 @@
  
  
  INSERT INTO `app` (`name`, `value`) VALUES
- ('version', '7.3'),
- ('date', 'August 23, 2019'),
- ('build', '20190823001'),
+ ('version', '7.4'),
+ ('date', 'April 25, 2020'),
+ ('build', '20200425001'),
  ('update', '0'),
- ('last_updated', 'August 23, 2019');
+ ('last_updated', 'April 25, 2020');
  
  --
  -- Dumping data for table `address`
  
  @@ -52,13 +52,13 @@
  --
  -- Dumping data for table `app`
  --
- 
  INSERT INTO `app` (`name`, `value`) VALUES
- ('version', '7.3'),
- ('date', 'August 23, 2019'),
- ('build', '20190823001'),
+ ('version', '7.4'),
+ ('date', 'April 25, 2020'),
+ ('build', '20200425001'),
  ('update', '0'),
- ('last_updated', 'August 23, 2019');
+ ('last_updated', 'April 25, 2020');
+ 
  
  --
  -- Dumping data for table `attendance_calendar`
  
  @@ -84,7 +84,7 @@
   echo '</tr><tr>';
   echo '<td valign="middle" align="center"><a href="Step0.1.php?mod=upgrade"><img src="assets/images/icon-upgrade.png" alt="Upgrade OpenSIS" /><br/><h5 class="text-black"><b>Upgrade</b><br/><small>(From ver 4.7 thru 6.0)</small></h5></a></td>';
                                          } else {
-  echo '<td valign="middle" align="center"><a href="SystemCheck.php"><img src="assets/images/icon-package.png" alt="New Installation" /><br/><h5 class="text-black"><b>New Installation</b><br/><small>(Ver 7.3)</small></h5></a></td>';
+  echo '<td valign="middle" align="center"><a href="SystemCheck.php"><img src="assets/images/icon-package.png" alt="New Installation" /><br/><h5 class="text-black"><b>New Installation</b><br/><small>(Ver 7.4)</small></h5></a></td>';
   echo '<td valign="middle" align="center"><a href="Step0.1.php?mod=upgrade"><img src="assets/images/icon-upgrade.png" alt="Upgrade OpenSIS"/><br/><h5 class="text-black"><b>Upgrade</b><br/><small>(From ver 7.1 onwards)</small></h5></a></td>';
                                          }
   ?>
  
  @@ -86,16 +86,26 @@ function usercheck_init(i) {
   return;
  
   var err = new Array();
-  if (i.value.match(/[^A-Za-z0-9_]/))
-  err[err.length] = 'Username can only contain letters, numbers and underscores';
+  if (i.value.match(/[^A-Za-z0-9_@.]/))
+  err[err.length] = 'Username can only contain letters, numbers, underscores, at the rate and dots';
   if (i.value.length < 3)
   err[err.length] = 'Username too short';
   if (err != '') {
   obj.style.color = '#ff0000';
   obj.innerHTML = err.join('<br />');
+ 
+  if(i.value.length > 1)
+  {
+  window.$("#staff_username_flag").val("0");
+  window.$("#mod_staff_btn").attr("disabled", true);
+  }
+ 
   return;
   }
  
+  window.$("#staff_username_flag").val("1");
+  window.$("#mod_staff_btn").attr("disabled", false);
+ 
   var pqr = i.value;
  
  
  @@ -112,6 +122,23 @@ function usercheck_callback(data) {
   obj.innerHTML = 'Username Available';
   else
   obj.innerHTML = 'Username already taken';
+ 
+ 
+  var staff_username = document.getElementById("USERNAME").value;
+  var staff_username_flag = document.getElementById("staff_username_flag").value;
+ 
+  if(staff_username != '' && staff_username_flag == '0')
+  {
+  var obj = document.getElementById('ajax_output');
+  obj.style.color = '#ff0000';
+  obj.innerHTML = 'Username can only contain letters, numbers, underscores, at the rate and dots';
+ 
+  window.$("#mod_staff_btn").attr("disabled", true);
+  }
+  else
+  {
+  window.$("#mod_staff_btn").attr("disabled", false);
+  }
  }
  
  function usercheck_init_mod(i, opt) {
  @@ -122,16 +149,26 @@ function usercheck_init_mod(i, opt) {
   return;
  
   var err = new Array();
-  if (i.value.match(/[^A-Za-z0-9_]/))
-  err[err.length] = 'Username can only contain letters, numbers and underscores';
+  if (i.value.match(/[^A-Za-z0-9_@.]/))
+  err[err.length] = 'Username can only contain letters, numbers, underscores, at the rate and dots';
   if (i.value.length < 3)
   err[err.length] = 'Username Too Short';
   if (err != '') {
   obj.style.color = '#ff0000';
   obj.innerHTML = err.join('<br />');
+ 
+  if(i.value.length > 1)
+  {
+  window.$("#staff_username_flag").val("0");
+  window.$("#mod_staff_btn").attr("disabled", true);
+  }
+ 
   return;
   }
  
+  window.$("#staff_username_flag").val("1");
+  window.$("#mod_staff_btn").attr("disabled", false);
+ 
   var pqr = i.value;
  
   if (opt == '1')
  @@ -147,6 +184,22 @@ function usercheck_callback_p(data) {
   var obj = document.getElementById('ajax_output_1');
   obj.style.color = (response) ? '#008800' : '#ff0000';
   obj.innerHTML = (response == 1) ? 'Username Available' : 'Username already taken';
+ 
+  var staff_username = document.getElementById("USERNAME").value;
+  var staff_username_flag = document.getElementById("staff_username_flag").value;
+ 
+  if(staff_username != '' && staff_username_flag == '0')
+  {
+  var obj = document.getElementById('ajax_output_1');
+  obj.style.color = '#ff0000';
+  obj.innerHTML = 'Username can only contain letters, numbers, underscores, at the rate and dots';
+ 
+  window.$("#mod_staff_btn").attr("disabled", true);
+  }
+  else
+  {
+  window.$("#mod_staff_btn").attr("disabled", false);
+  }
  }
  
  function usercheck_callback_s(data) {
  @@ -155,6 +208,22 @@ function usercheck_callback_s(data) {
   var obj = document.getElementById('ajax_output_2');
   obj.style.color = (response) ? '#008800' : '#ff0000';
   obj.innerHTML = (response == 1) ? 'Username Available' : 'Username already taken';
+ 
+  var staff_username = document.getElementById("USERNAME").value;
+  var staff_username_flag = document.getElementById("staff_username_flag").value;
+ 
+  if(staff_username != '' && staff_username_flag == '0')
+  {
+  var obj = document.getElementById('ajax_output_1');
+  obj.style.color = '#ff0000';
+  obj.innerHTML = 'Username can only contain letters, numbers, underscores, at the rate and dots';
+ 
+  window.$("#mod_staff_btn").attr("disabled", true);
+  }
+  else
+  {
+  window.$("#mod_staff_btn").attr("disabled", false);
+  }
  }
  
  
  @@ -232,16 +301,57 @@ function usercheck_init_staff(i) {
   return;
  
   var err = new Array();
-  if (i.value.match(/[^A-Za-z0-9_]/))
-  err[err.length] = 'Username can only contain letters, numbers and underscores';
+  if (i.value.match(/[^A-Za-z0-9_@.]/))
+  err[err.length] = 'Username can only contain letters, numbers, underscores, at the rate and dots';
+  if (i.value.length < 3)
+  err[err.length] = 'Username Too Short';
+  if (err != '') {
+  obj.style.color = '#ff0000';
+  obj.innerHTML = err.join('<br />');
+ 
+  if(i.value.length > 1)
+  {
+  window.$("#staff_username_flag").val("0");
+  window.$("#mod_staff_btn").attr("disabled", true);
+  }
+ 
+  return;
+  }
+ 
+  window.$("#staff_username_flag").val("1");
+  window.$("#mod_staff_btn").attr("disabled", false);
+ 
+  ajax_call('Validator.php?u=' + i.value + 'stud', usercheck_callback_staff);
+ }
+ 
+ function usercheck_init_staff_2(i) {
+  var obj = document.getElementById('ajax_output_st');
+  obj.innerHTML = '';
+  document.getElementById('usr_err_check').value = '0';
+  if (i.value.length < 1)
+  return;
+ 
+  var err = new Array();
+  if (i.value.match(/[^A-Za-z0-9_@.]/))
+  err[err.length] = 'Username can only contain letters, numbers, underscores, at the rate and dots';
   if (i.value.length < 3)
   err[err.length] = 'Username Too Short';
   if (err != '') {
   obj.style.color = '#ff0000';
   obj.innerHTML = err.join('<br />');
+ 
+  if(i.value.length > 1)
+  {
+  window.$("#staff_username_flag").val("0");
+  window.$("#mod_staff_btn").attr("disabled", true);
+  }
+ 
   return;
   }
  
+  window.$("#staff_username_flag").val("1");
+  window.$("#mod_staff_btn").attr("disabled", false);
+ 
   ajax_call('Validator.php?u=' + i.value + 'stud', usercheck_callback_staff);
  }
  
  @@ -266,15 +376,24 @@ function usercheck_init_student(i) {
   return;
  
   var err = new Array();
-  if (i.value.match(/[^A-Za-z0-9_]/))
-  err[err.length] = 'Username can only contain letters, numbers and underscores';
+  if (i.value.match(/[^A-Za-z0-9_@.]/))
+  err[err.length] = 'Username can only contain letters, numbers, underscores, at the rate and dots';
   if (i.value.length < 3)
   err[err.length] = 'Username Too Short';
   if (err != '') {
   obj.style.color = '#ff0000';
   obj.innerHTML = err.join('<br />');
+ 
+  if(i.value.length > 1)
+  {
+  window.$("#stu_username_flag").val("0");
+  window.$("#mod_student_btn").attr("disabled", true);
+  }
+ 
   return;
   }
+  window.$("#stu_username_flag").val("1");
+  window.$("#mod_student_btn").attr("disabled", false);
   ajax_call('Validator.php?u=' + i.value + 'stud', usercheck_callback_student, usercheck_error_student);
  }
  
  @@ -303,6 +422,22 @@ function usercheck_callback_student_Mod(data) {
   document.getElementById('students[USERNAME]').value = '';
   document.getElementById('students[PASSWORD]').value = '';
   }
+ 
+  var student_username = document.getElementById("students[USERNAME]").value;
+  var student_username_flag = document.getElementById("stu_username_flag").value;
+ 
+  if(student_username != '' && student_username_flag == '0')
+  {
+  var obj = document.getElementById('ajax_output_st');
+  obj.style.color = '#ff0000';
+  obj.innerHTML = 'Username can only contain letters, numbers, underscores, at the rate and dots';
+ 
+  window.$("#mod_student_btn").attr("disabled", true);
+  }
+  else
+  {
+  window.$("#mod_student_btn").attr("disabled", false);
+  }
  }
  
  function usercheck_error_student_Mod(err) {
  @@ -2066,8 +2201,8 @@ function usercheck_init_noacess(i) {
   return;
  
   var err = new Array();
-  if (i.value.match(/[^A-Za-z0-9_]/))
-  err[err.length] = 'Username can only contain letters, numbers and underscores';
+  if (i.value.match(/[^A-Za-z0-9_@.]/))
+  err[err.length] = 'Username can only contain letters, numbers, underscores, at the rate and dots';
   if (i.value.length < 3)
   err[err.length] = 'Username Too Short';
   if (err != '') {
  
  @@ -664,6 +664,31 @@ function checkAllDtMod(elem,name)
   }
  }
  
+ function checkAllDtMod2(elem,name)
+ {
+  var res_length=document.getElementById('res_length').value;
+  var res_len=document.getElementById('res_len').value;
+  var unique_id=res_len.split(',');
+ 
+  for(var i=0;i<res_length;i++){
+  if(elem.checked==true){
+  if(document.getElementById(unique_id[i])){
+  $('#hidden_checkboxes').append("<input type=hidden name='"+name+"["+unique_id[i]+"]' value='"+unique_id[i]+"' data-checkbox-hidden-id='"+unique_id[i]+"' />");
+  // document.getElementById(unique_id[i]).checked=true;
+  // window.$('#'+unique_id[i]).attr("checked",true);
+  $(".student_label_cbx").prop('checked', true);
+  // alert(unique_id[i]);
+  }
+  }else{
+  if(document.getElementById(unique_id[i])){
+  $('[data-checkbox-hidden-id='+unique_id[i]+']').remove(); 
+  // document.getElementById(unique_id[i]).checked=false;
+  $(".student_label_cbx").prop('checked', false);
+  }
+  }
+  }
+ }
+ 
  function addseccheck_button(){
   if (document.getElementById('values[people][SECONDARY][RELATIONSHIP]').value != ''){
   document.getElementById('rss').checked=true;
  
