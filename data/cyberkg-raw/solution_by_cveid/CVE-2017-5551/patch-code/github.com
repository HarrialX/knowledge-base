Original Source:
https://github.com/torvalds/linux/commit/497de07d89c1410d76a15bec2bb41f24a2a89f31

Commit history:

  @@ -922,11 +922,10 @@ int simple_set_acl(struct inode *inode, struct posix_acl *acl, int type)
   int error;
  
   if (type == ACL_TYPE_ACCESS) {
- 		error = posix_acl_equiv_mode(acl, &inode->i_mode);
-  if (error < 0)
-  return 0;
-  if (error == 0)
- 			acl = NULL;
+ 		error = posix_acl_update_mode(inode,
+ 				&inode->i_mode, &acl);
+  if (error)
+  return error;
  	}
  
  	inode->i_ctime = current_time(inode);
  
