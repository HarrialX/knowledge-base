Original Source:
https://github.com/nfriedly/node-bestzip/commit/45d4a901478c6a8f396c8b959dd6cf8fd3f955b6

Commit history:

  @@ -65,30 +65,32 @@ function walkDir(fullPath) {
  
  const nativeZip = options =>
   new Promise((resolve, reject) => {
-  const sources = Array.isArray(options.source)
-       ? options.source.join(" ")
-       : options.source;
-  const command = `zip --quiet --recurse-paths ${
-  options.destination
-  } ${sources}`;
-  const zipProcess = cp.exec(command, {
-  stdio: "inherit",
-  cwd: options.cwd
-  });
-  zipProcess.on("error", reject);
-  zipProcess.on("close", exitCode => {
-  if (exitCode === 0) {
-  resolve();
-  } else {
-  // exit code 12 means "nothing to do" right?
-  //console.log('rejecting', zipProcess)
-  reject(
-  new Error(
-  `Unexpected exit code from native zip command: ${exitCode}\n executed command '${command}'\n executed inin directory '${options.cwd ||
-  process.cwd()}'`
-  )
-  );
-  }
+  const cwd = options.cwd || process.cwd();
+  const command = "zip";
+  expandSources(cwd, options.source, (err, sources) => {
+  const args = ["--quiet", "--recurse-paths", options.destination].concat(
+  sources
+  );
+  const zipProcess = cp.spawn(command, args, {
+  stdio: "inherit",
+         cwd
+  });
+  zipProcess.on("error", reject);
+  zipProcess.on("close", exitCode => {
+  if (exitCode === 0) {
+  resolve();
+  } else {
+  // exit code 12 means "nothing to do" right?
+  //console.log('rejecting', zipProcess)
+  reject(
+  new Error(
+  `Unexpected exit code from native zip: ${exitCode}\n executed command '${command} ${args.join(
+  " "
+  )}'\n executed in directory '${cwd}'`
+  )
+  );
+  }
+  });
   });
   });
  
  
