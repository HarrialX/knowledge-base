Original Source:
https://github.com/torvalds/linux/commit/2dcab598484185dea7ec22219c76dcdd59e3cb90

Commit history:

  @@ -7426,7 +7426,8 @@ static int sctp_wait_for_sndbuf(struct sctp_association *asoc, long *timeo_p,
   */
   release_sock(sk);
  		current_timeo = schedule_timeout(current_timeo);
-  BUG_ON(sk != asoc->base.sk);
+  if (sk != asoc->base.sk)
+  goto do_error;
   lock_sock(sk);
  
  		*timeo_p = current_timeo;
  
