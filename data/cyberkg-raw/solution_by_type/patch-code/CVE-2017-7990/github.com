Original Source:
https://github.com/openmrs/openmrs-module-reporting/pull/141/commits/0023a659288538d2763835847d3414ecb18b931a#diff-50e25eddc5909110fa3d31090877c2fd

Commit history:

  @@ -42,7 +42,7 @@
  			<div style="margin:0; padding:0; width:100%;">
  				<div class="metadataField">
  					<label class="desc" for="name"><spring:message code="reporting.name" /></label>
- 					<input type="text" id="name" tabindex="1" name="name" value="${model.obj.name}" size="50"/>
+ 					<input type="text" id="name" tabindex="1" name="name" value="<c:out value='${model.obj.name}' />" size="50"/>
  				</div>
  				<c:if test="${!empty model.obj && model.showType != 'false'}">
  					<div class="metadataField">
  @@ -52,7 +52,7 @@
  				</c:if>		
  				<div class="metadataField">
  					<label class="desc" for="description"><spring:message code="reporting.description" /></label>			
- 					<textarea id="description" cols="80" rows="10" tabindex="2" name="description">${model.obj.description}</textarea>
+ 					<textarea id="description" cols="80" rows="10" tabindex="2" name="description"><c:out value='${model.obj.description}' /></textarea>
  				</div>
  			</div>
  			<hr style="color:blue;"/>
  
  @@ -73,7 +73,7 @@
  							<rpt:displayLabel type="${reportDefinition['class'].name}"/>
  						</td>
  						<td width="5%" nowrap>
-  ${reportDefinition.creator}
+  <c:out value="${reportDefinition.creator}" />
  						</td>
  						<td width="5%" nowrap>
  							<rpt:timespan then="${reportDefinition.dateCreated}"/>
  @@ -82,7 +82,7 @@
   &nbsp;
  							<a href="${editUrl}"><img src="<c:url value='/images/edit.gif'/>" border="0"/></a>
   &nbsp;
- 							<a href="javascript:confirmDelete('${reportDefinition.name}','${reportDefinition.uuid}');"><img src="<c:url value='/images/trash.gif'/>" border="0"/></a>
+ 							<a href="javascript:confirmDelete('<c:out value="${openmrs:getSafeJsString(reportDefinition.name)}" />','${reportDefinition.uuid}');"><img src="<c:url value='/images/trash.gif'/>" border="0"/></a>
                  This comment has been minimized.

          


Sign in to view






























dkayiwa



Apr 19, 2017




      Member
    



Since we are using c:out, do we then need getSafeJsString?




















                This comment has been minimized.

          


Sign in to view






























isears



Apr 19, 2017




  Author


      Member
    



Yes. We have inline javascript embedded into html here, so we have to make sure the input is safe for use in both languages. The problem with c:out alone is that it converts all single/double quote characters to html entities, which break the in-line javascript.




















                This comment has been minimized.

          


Sign in to view






























dkayiwa



Apr 19, 2017




      Member
    



Oh i see! Thanks for the detailed explanation. ðŸ˜Š
   &nbsp;
  							<a href="${pageContext.request.contextPath}/module/reporting/run/runReport.form?reportId=${reportDefinition.uuid}">
  								<img src='<c:url value="/images/play.gif"/>' align="absmiddle" border="0"/>
  
