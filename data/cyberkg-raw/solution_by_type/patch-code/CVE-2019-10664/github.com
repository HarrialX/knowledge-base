Original Source:
https://github.com/domoticz/domoticz/commit/ee70db46f81afa582c96b887b73bcd2a86feda00

Commit history:

  @@ -10772,7 +10772,7 @@ namespace http {
  				return;
  			}
  			std::vector<std::vector<std::string> > result;
- 			result = m_sql.safe_queryBlob("SELECT Image FROM Floorplans WHERE ID=%s", idx.c_str());
+ 			result = m_sql.safe_queryBlob("SELECT Image FROM Floorplans WHERE ID=%d", atol(idx.c_str()));
  			if (result.empty())
  				return;
  			reply::set_content(&rep, result[0][0].begin(), result[0][0].end());
  
