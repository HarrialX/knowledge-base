Original Source:
https://github.com/rhysd/Shiba/commit/e8a65b0f81eb04903eedd29500d7e1bedf249eab

Commit history:

  @@ -51,9 +51,10 @@
   "@types/empower": "^1.2.30",
   "@types/es6-promise": "0.0.33",
   "@types/he": "^0.5.29",
-  "@types/highlight.js": "^9.12.1",
+  "@types/highlight.js": "^9.12.2",
   "@types/js-yaml": "^3.9.1",
   "@types/katex": "0.5.0",
+  "@types/marked": "^0.3.0",
   "@types/mocha": "^2.2.44",
   "@types/mousetrap": "^1.5.34",
   "@types/node": "8.0.53",
  
  @@ -41,17 +41,20 @@ marked.setOptions({
   }
   },
  
+  // @ts-ignore: emoji is a dedicated method added by my fork
   emoji(name: string) {
   return emoji_replacer.replaceOne(name);
   },
+ 
+  sanitize: 1,
  });
  
  const REGEX_CHECKED_LISTITEM = /^\[x]\s+/;
  const REGEX_UNCHECKED_LISTITEM = /^\[ ]\s+/;
  
  class MarkdownRenderer {
   public outline: Heading[];
-  private renderer: MarkedRenderer;
+  private renderer: marked.Renderer;
   private link_id: number;
   private tooltips: string;
  
  
  @@ -18,7 +18,6 @@
   "index.ts",
   "keyboard.ts",
   "lib.d.ts",
-  "marked.d.ts",
   "lint-message.ts",
   "lint-panel.ts",
   "markdown-preview.ts",
  
