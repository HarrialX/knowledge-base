Original Source:
https://github.com/PrismJS/prism/commit/c2f6a64426f44497a675cb32dccb079b3eff1609

Commit history:

  @@ -1,7 +1,7 @@
  (function (Prism) {
  
   var attributes = {
-  pattern: /(^[ \t]*)\[(?!\[)(?:(["'$`])(?:(?!\2)[^\\]|\\.)*\2|\[(?:[^\]\\]|\\.)*\]|[^\]\\]|\\.)*\]/m,
+  pattern: /(^[ \t]*)\[(?!\[)(?:(["'$`])(?:(?!\2)[^\\]|\\.)*\2|\[(?:[^\[\]\\]|\\.)*\]|[^\[\]\\"'$`]|\\.)*\]/m,
   lookbehind: true,
   inside: {
   'quoted': {
  @@ -32,7 +32,7 @@
   alias: 'comment'
   },
   'table': {
-  pattern: /^\|={3,}(?:(?:\r?\n|\r).*)*?(?:\r?\n|\r)\|={3,}$/m,
+  pattern: /^\|={3,}(?:(?:\r?\n|\r(?!\n)).*)*?(?:\r?\n|\r)\|={3,}$/m,
   inside: {
   'specifiers': {
   pattern: /(?!\|)(?:(?:(?:\d+(?:\.\d+)?|\.\d+)[+*])?(?:[<^>](?:\.[<^>])?|\.[<^>])?[a-z]*)(?=\|)/,
  @@ -124,7 +124,7 @@
   }
   ],
   'macro': {
-  pattern: /\b[a-z\d][a-z\d-]*::?(?:(?:\S+)??\[(?:[^\]\\"]|(["'])(?:(?!\1)[^\\]|\\.)*\1|\\.)*\])/,
+  pattern: /\b[a-z\d][a-z\d-]*::?(?:(?:\S+)??\[(?:[^\]\\"']|(["'])(?:(?!\1)[^\\]|\\.)*\1|\\.)*\])/,
   inside: {
   'function': /^[a-z\d-]+(?=:)/,
   'punctuation': /^::?/,
  
  @@ -133,7 +133,7 @@
   },
   // “Normal” string
   {
-  pattern: /(^|[^\\](?:\\\\)*)(["'])(?:\\[\s\S]|\$\([^)]+\)|`[^`]+`|(?!\2)[^\\])*\2/,
+  pattern: /(^|[^\\](?:\\\\)*)(["'])(?:\\[\s\S]|\$\([^)]+\)|\$(?!\()|`[^`]+`|(?!\2)[^\\`$])*\2/,
   lookbehind: true,
   greedy: true,
   inside: insideString
  
