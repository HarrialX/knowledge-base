Original Source:
https://github.com/lsegal/yard/commit/b0217b3e30dc53d057b1682506333335975e62b4

Commit history:

  @@ -40,6 +40,8 @@ def self.cleanpath(path)
   if comp == RELATIVE_PARENTDIR && !acc.empty? && acc.last != RELATIVE_PARENTDIR
   acc.pop
   next acc
+  elsif comp == RELATIVE_PARENTDIR && acc.empty?
+  next acc
   end
   acc << comp
   end
  
  @@ -41,12 +41,12 @@
   expect(File.cleanpath('A/B/C/D/..')).to eq "A/B/C"
   end
  
-  it "passes the initial directory" do
-  expect(File.cleanpath('C/../../D')).to eq "../D"
+  it "does not allow relative path above root" do
+  expect(File.cleanpath('A/../../../../../D')).to eq "D"
   end
  
   it "does not remove multiple '../' at the beginning" do
-  expect(File.cleanpath('../../A/B')).to eq '../../A/B'
+  expect(File.cleanpath('../../A/B')).to eq 'A/B'
   end
   end
  
  
