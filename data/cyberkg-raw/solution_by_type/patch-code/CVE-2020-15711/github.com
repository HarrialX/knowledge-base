Original Source:
https://github.com/MISP/MISP/commit/bf4610c947c7dc372c4078f363d2dff6ae0703a8

Commit history:

  @@ -46,7 +46,7 @@ class AppController extends Controller
  
   public $helpers = array('Utility', 'OrgImg', 'FontAwesome', 'UserName', 'DataPathCollector');
  
-  private $__queryVersion = '106';
+  private $__queryVersion = '107';
   public $pyMispVersion = '2.4.128';
   public $phpmin = '7.2';
   public $phprec = '7.4';
  
  @@ -413,8 +413,9 @@
   'type' => 'root',
   'url' => '#',
   'html' => sprintf(
-  '<span class="fas fa-star %s" id="setHomePage" title="Set the current page as your home page in MISP"></span>',
-                     (!empty($homepage['path']) && $homepage['path'] === $this->here) ? 'orange' : ''
+  '<span class="fas fa-star %s" id="setHomePage" title="Set the current page as your home page in MISP" data-current-page="%s"></span>',
+                     (!empty($homepage['path']) && $homepage['path'] === $this->here) ? 'orange' : '',
+  $this->here
                  )
              ),
   array(
  
  @@ -88,6 +88,7 @@
   <div id = "ajax_fail_container" class="ajax_container">
   <div id="ajax_fail" class="ajax_result ajax_fail"></div>
   </div>
+  <div id = "ajax_hidden_container" class="hidden"></div>
   <div class="loading">
   <div class="spinner"></div>
   <div class="loadingText"><?php echo __('Loading');?></div>
  
  @@ -5022,15 +5022,23 @@ function resetDashboardGrid(grid) {
  
  function setHomePage() {
   $.ajax({
-  type: 'POST',
+  type: 'GET',
   url: baseurl + '/userSettings/setHomePage',
-  data: {
-  path: window.location.pathname
-  },
   success:function (data, textStatus) {
-  showMessage('success', 'Homepage set.');
-  $('#setHomePage').addClass('orange');
-  },
+  $('#ajax_hidden_container').html(data);
+  var currentPage = $('#setHomePage').data('current-page');
+  $('#UserSettingPath').val(currentPage);
+  $.ajax({
+  type: 'POST',
+  url: baseurl + '/userSettings/setHomePage',
+  data: $('#UserSettingSetHomePageForm').serialize(),
+  success:function (data, textStatus) {
+  showMessage('success', 'Homepage set.');
+  $('#setHomePage').addClass('orange');
+  },
+  });
+ 
+  }
   });
  }
  
  
