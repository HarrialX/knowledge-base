Original Source:
https://github.com/ether/etherpad-lite/commit/5879037ddca4ab9a4002adf90fc7ce6c9f82f01b

Commit history:

  @@ -361,6 +361,8 @@ <h2 data-l10n-id="pad.share.emebdcode"></h2>
  
   <% e.begin_block("scripts"); %>
   <script type="text/javascript">
+  var padutils = require('../static/js/pad_utils').padutils;
                This comment has been minimized.

        

Sign in to view
















              Copy link
            

              Quote reply
            









muxator



Nov 24, 2019




      Contributor
    


This code calls require() when it's still not defined. It will be loaded in the next <script> block, via:
<script type="text/javascript" src="../static/js/require-kernel.js"></script>
This ended up in 1.8.0-beta.1. If confirmed, this should be fixed (or reverted).
@aaron-costello, could you confirm & review?














              This comment has been minimized.

        

Sign in to view
















              Copy link
            

              Quote reply
            









aaron-costello



Nov 25, 2019




  Author


      Contributor
    


@muxator I can confirm this, thanks for pointing this out.
PR made here: #3670
+ 
   // @license magnet:?xt=urn:btih:8e4f440f4c65981c5bf93c76d35135ba5064d8b7&dn=apache-2.0.txt
   (function() {
   // Display errors on page load to the user
  @@ -370,7 +372,7 @@ <h2 data-l10n-id="pad.share.emebdcode"></h2>
   var box = document.getElementById('editorloadingbox');
   box.innerHTML = '<p><b>An error occurred while loading the pad</b></p>'
   + '<p><b>'+msg+'</b> '
-  + '<small>in '+ url +' (line '+ line +')</small></p>';
+  + '<small>in '+ padutils.escapeHTML(url) +' (line '+ line +')</small></p>';
   // call original error handler
   if(typeof(originalHandler) == 'function') originalHandler.call(null, arguments);
   };
  
