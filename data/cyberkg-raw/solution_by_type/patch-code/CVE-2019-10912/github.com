Original Source:
https://github.com/symfony/symfony/commit/4fb975281634b8d49ebf013af9e502e67c28816b

Commit history:

  @@ -83,6 +83,16 @@ public function __construct(array $mockedNamespaces = array())
          }
      }
  
+  public function __sleep()
+     {
+  throw new \BadMethodCallException('Cannot serialize '.__CLASS__);
+     }
+ 
+  public function __wakeup()
+     {
+  throw new \BadMethodCallException('Cannot unserialize '.__CLASS__);
+     }
+ 
   public function __destruct()
      {
   if (0 < $this->state) {
  
  @@ -64,6 +64,16 @@ public function getLogDir()
   return $this->cacheDir;
      }
  
+  public function __sleep()
+     {
+  throw new \BadMethodCallException('Cannot serialize '.__CLASS__);
+     }
+ 
+  public function __wakeup()
+     {
+  throw new \BadMethodCallException('Cannot unserialize '.__CLASS__);
+     }
+ 
   public function __destruct()
      {
   $fs = new Filesystem();
  
  @@ -116,6 +116,16 @@ public static function throwError($type, $message, $file, $line)
   throw new \ErrorException($message, 0, $type, $file, $line);
      }
  
+  public function __sleep()
+     {
+  throw new \BadMethodCallException('Cannot serialize '.__CLASS__);
+     }
+ 
+  public function __wakeup()
+     {
+  throw new \BadMethodCallException('Cannot unserialize '.__CLASS__);
+     }
+ 
   public function __destruct()
      {
   if (method_exists(parent::class, '__destruct')) {
  
