Original Source:
https://github.com/inspircd/inspircd/commit/4350a11c663b0d75f8119743bffb7736d87abd4d

Commit history:

  @@ -668,9 +668,10 @@ struct ClientProtocol::Messages::Pong : public ClientProtocol::Message
   Pong(const std::string& cookie, const std::string& server = "")
  		: ClientProtocol::Message("PONG", ServerInstance->Config->GetServerName())
  	{
-  PushParamRef(ServerInstance->Config->GetServerName());
-  if (!server.empty())
-  PushParamRef(server);
+  if (server.empty())
+  PushParamRef(ServerInstance->Config->GetServerName());
+  else
+  PushParam(server);
   PushParamRef(cookie);
  	}
  };
  
  @@ -83,7 +83,7 @@ class CommandPing : public SplitCommand
   return CMD_FAILURE;
  		}
  
- 		ClientProtocol::Messages::Pong pong(parameters[0], origin ? parameters[1] : "");
+ 		ClientProtocol::Messages::Pong pong(parameters[0], origin ? parameters[1] : ServerInstance->Config->GetServerName());
  		user->Send(ServerInstance->GetRFCEvents().pong, pong);
   return CMD_SUCCESS;
  	}
  
