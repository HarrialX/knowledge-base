Original Source:
https://github.com/tensorflow/tensorflow/commit/704866eabe03a9aeda044ec91a8d0c83fc1ebdbe

Commit history:

  @@ -90,6 +90,8 @@ class UnsortedSegmentJoinOp : public OpKernel {
   const int32 segment_dims = segment_id_shape.dims();
  
   const Tensor& num_segments_tensor = context->input(2);
+  OP_REQUIRES(context, num_segments_tensor.NumElements() != 0,
+  errors::InvalidArgument("Number of segments cannot be empty."));
   auto num_segments = num_segments_tensor.scalar<NUM_SEGMENTS_TYPE>()();
  
   OP_REQUIRES(context, segment_dims != 0,
  
