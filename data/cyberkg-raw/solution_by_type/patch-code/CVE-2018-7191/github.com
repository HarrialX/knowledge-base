Original Source:
https://github.com/torvalds/linux/commit/5c25f65fd1e42685f7ccd80e0621829c105785d9

Commit history:

  @@ -2028,7 +2028,7 @@ static int tun_set_iff(struct net *net, struct file *file, struct ifreq *ifr)
   if (!dev)
   return -ENOMEM;
  		err = dev_get_valid_name(net, dev, name);
-  if (err)
+  if (err < 0)
   goto err_free_dev;
  
   dev_net_set(dev, net);
  
